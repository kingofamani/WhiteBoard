# Web 教學白板 (MVP+)

## 專案簡介

本專案旨在建立一個網頁版的互動式教學白板，提供教師或簡報者一個方便的線上工具。目前已完成 MVP (Minimum Viable Product) 核心功能，正在開發進階的專案管理系統。
靈感來源：classroomscreen.com

## 🎯 專案狀態

### ✅ 已完成功能 (MVP+ 完成)

1.  **畫布 (Canvas)**:
    *   ✅ 基本繪圖功能：
        *   畫筆 (可選顏色、粗細)
        *   橡皮擦
        *   游標選擇工具
    *   ✅ 清空畫布功能
    *   ✅ 畫布尺寸自動填滿整個瀏覽器視窗 (100% 寬高)
    *   ✅ RWD 響應式調整，內容保留與重繪

2.  **背景管理 (Background Management)**:
    *   ✅ 允許使用者更換畫布背景：
        *   純色背景 (白色、淺灰、自訂顏色)
        *   預設圖片背景 (格線)

3.  **文字工具 (Text Tool)**:
    *   ✅ 允許使用者在畫布上新增文字框
    *   ✅ 可以輸入文字內容
    *   ✅ 文字保留和重繪功能

4.  **便條紙 (Sticky Notes)**:
    *   ✅ 允許使用者新增便條紙到畫布上
    *   ✅ 可以在便條紙上輸入文字
    *   ✅ 便條紙可以被拖拽移動
    *   ✅ 便條紙內容保留和重繪

5.  **QR Code 產生器 (QR)**:
    *   ✅ 真實 QR Code 生成 (使用 qr-server.com API)
    *   ✅ 多種內容支援 (文字、網址、電話號碼)
    *   ✅ 自訂大小調整 (100-300px)
    *   ✅ 即時預覽功能
    *   ✅ 點擊畫布放置
    *   ✅ 錯誤處理和備用方案
    *   ✅ 內容保留和重繪

6.  **YouTube 影片嵌入 (📺)**:
    *   ✅ 支援多種 YouTube URL 格式
    *   ✅ 影片 iframe 嵌入和顯示
    *   ✅ 影片拖拽移動功能
    *   ✅ 影片縮放調整功能
    *   ✅ 影片刪除功能（按鈕和快捷鍵）
    *   ✅ 影片選中狀態和視覺回饋
    *   ✅ 控制項顯示/隱藏機制

7.  **圖片插入功能 (🖼️)**:
    *   ✅ 圖片檔案選擇和上傳
    *   ✅ 支援多種圖片格式 (JPG, PNG, GIF, WebP)
    *   ✅ 圖片拖拽移動和縮放調整
    *   ✅ 圖片刪除功能
    *   ✅ 圖片選中狀態管理
    *   ✅ Base64 編碼儲存

8.  **計時器功能 (分離式設計)**:
    *   ✅ **倒數計時器 (⏰)**:
        *   DOM 元素倒數計時器 (280x120px)
        *   可拖拽、縮放、刪除
        *   分鐘/秒數調整按鈕 (±1分鐘, ±10秒)
        *   預設 10:00 分鐘
        *   計時結束聲音警報系統
        *   Toast 通知顯示
        *   視覺提醒效果 (閃爍、變色)
    *   ✅ **碼錶 (⏱)**:
        *   DOM 元素碼錶 (320x100px)
        *   百分秒精度 (10ms 更新)
        *   橫向佈局設計
        *   播放/暫停/重置控制
        *   可拖拽、縮放、刪除

9.  **音量偵測功能 (🎤)**:
    *   ✅ 麥克風權限請求和控制
    *   ✅ 即時音量分析和視覺化
    *   ✅ 音量條動態顯示（綠/黃/紅）
    *   ✅ 閾值滑桿調節
    *   ✅ 閾值指示線顯示
    *   ✅ 音量超標警告系統
    *   ✅ 警告計數器和鈴鐺動畫
    *   ✅ Toast 通知系統
    *   ✅ 音量平滑處理和冷卻機制

10. **響應式網頁設計 (RWD)**:
    *   ✅ 畫布響應式調整
    *   ✅ 內容保留和重繪機制
    *   ✅ 工具列適應性佈局

### 🔄 開發中功能

11. **專案管理系統 (🔄 進行中)**:
    *   🔄 專案新增、命名功能
    *   🔄 專案儲存到 localStorage
    *   🔄 專案載入和選擇器
    *   🔄 專案列表管理
    *   🔄 畫布縮圖生成
    *   🔄 自動儲存機制

## 技術棧

*   **前端語言**: HTML, CSS, JavaScript (ES6+)
*   **CSS 框架**: TailwindCSS
*   **核心繪圖**: HTML5 Canvas API
*   **架構模式**: 模組化設計
*   **資料儲存**: localStorage (專案管理)
*   **音頻處理**: Web Audio API

## 檔案結構

```
WhiteBoard/
├── index.html              # 主頁面
├── css/
│   └── style.css           # 自訂樣式
├── js/
│   ├── app.js              # 主應用程式邏輯
│   ├── CanvasModule.js     # 畫布核心模組
│   ├── BackgroundModule.js # 背景管理模組
│   ├── TextToolModule.js   # 文字工具模組
│   ├── NotesModule.js      # 便條紙模組
│   ├── QRCodeModule.js     # QR Code 產生器模組
│   ├── YouTubeModule.js    # YouTube 影片嵌入模組
│   ├── ImageModule.js      # 圖片插入模組
│   ├── CountdownModule.js  # 倒數計時器模組
│   ├── StopwatchModule.js  # 碼錶模組
│   └── VolumeDetectionModule.js # 音量偵測模組
├── README.md               # 專案說明
├── TODO.md                 # 開發待辦事項
├── FRAMEWORK.md            # 程式架構說明
└── FLOW.md                 # 程式流程圖
```

## 功能特色

### 🎨 繪圖功能
- **多工具支援**: 游標、畫筆、橡皮擦、文字、便條紙
- **自訂設定**: 顏色選擇、線條粗細調整
- **觸控支援**: 支援滑鼠和觸控設備操作

### 🖼️ 背景管理
- **多種背景**: 白色、淺灰、格線、自訂顏色
- **即時切換**: 背景變更時保留所有繪圖內容

### 📝 文字與便條紙
- **文字工具**: 點擊畫布任意位置新增文字
- **便條紙**: 可新增、編輯、拖拽移動的便條紙
- **內容保留**: 所有文字和便條紙在視窗調整時保持不變

### 📱 QR Code 產生器
- **真實 QR Code**: 使用 qr-server.com API 生成可掃描的 QR code
- **多種內容支援**: 支援文字、網址、電話號碼等各種內容
- **自訂大小**: 可調整 QR code 大小（100-300px）
- **即時預覽**: 輸入內容後立即顯示 QR code 預覽
- **點擊放置**: 在畫布上點擊任意位置放置 QR code
- **錯誤處理**: 網路問題時自動使用備用方案

### 📺 YouTube 影片嵌入
- **多格式支援**: 支援各種 YouTube URL 格式
- **拖拽控制**: 影片可自由移動和縮放
- **選中管理**: 影片選中狀態和控制項顯示
- **快捷操作**: 支援 Delete 鍵快速刪除

### 🖼️ 圖片插入
- **多格式支援**: JPG、PNG、GIF、WebP
- **拖拽控制**: 圖片可自由移動和縮放
- **檔案上傳**: 本地圖片檔案選擇和上傳
- **Base64 儲存**: 圖片轉換為 Base64 格式儲存

### ⏱️ 計時器功能 (分離式設計)
- **倒數計時器**: 
  - 可設定分鐘和秒數的倒數計時器
  - 預設 10:00 分鐘，支援 ±1分鐘、±10秒調整
  - 計時結束時播放聲音警報
  - Toast 通知和閃爍視覺提醒
- **碼錶功能**: 
  - 精確到百分秒的碼錶計時 (10ms 精度)
  - 橫向佈局，播放/暫停/重置控制
  - 預設顯示 "00:12.75"
- **DOM 元素**: 所有計時器都是可拖拽、縮放、刪除的 DOM 元素

### 🎤 音量偵測
- **麥克風監控**: 即時音量分析和視覺化
- **警告系統**: 音量超標時的計數和動畫提醒
- **閾值調整**: 可自訂音量警告閾值
- **Toast 通知**: 超標時的彈出式警告

### 📱 響應式設計
- **自適應畫布**: 畫布自動填滿螢幕並響應視窗大小變化
- **內容保留**: 視窗調整時自動重繪所有內容
- **跨設備支援**: 支援桌機、平板、手機使用

### 📁 專案管理 (開發中)
- **多專案支援**: 可建立和管理多個教學白板專案
- **專案儲存**: 將整個白板狀態儲存到 localStorage
- **專案載入**: 完整還原之前的專案狀態
- **縮圖預覽**: 專案選擇時顯示畫布縮圖

## 使用方法

### 基本操作
1. **選擇工具**: 點擊工具列上的按鈕選擇游標、畫筆、橡皮擦、文字或便條紙工具
2. **調整設定**: 使用顏色選擇器和粗細滑桿調整繪圖參數
3. **開始繪圖**: 在畫布上點擊或拖拽進行繪圖

### 文字功能
1. 點擊文字工具按鈕 (T)
2. 在畫布上點擊要新增文字的位置
3. 在彈出的文字框中輸入內容
4. 按 Enter 或點擊其他地方完成輸入

### 便條紙功能
1. 點擊便條紙工具按鈕 (N)
2. 在畫布上點擊要新增便條紙的位置
3. 在便條紙中輸入文字內容
4. 拖拽便條紙可移動位置
5. 清空文字內容可刪除便條紙

### QR Code 功能
1. 點擊 QR Code 工具按鈕 (QR)
2. 在面板中輸入要轉換的文字或網址
3. 調整 QR Code 大小
4. 點擊產生按鈕
5. 在畫布上點擊要放置的位置

### YouTube 影片嵌入
1. 點擊 YouTube 工具按鈕 (📺)
2. 輸入 YouTube 影片網址
3. 在畫布上點擊要放置的位置
4. 拖拽影片可移動位置
5. 拖拽右下角可調整大小
6. 點擊刪除按鈕或按 Delete 鍵刪除

### 圖片插入
1. 點擊圖片工具按鈕 (🖼️)
2. 選擇本地圖片檔案
3. 在畫布上點擊要放置的位置
4. 拖拽圖片可移動位置
5. 拖拽控制點可調整大小

### 計時器功能
1. **倒數計時器**:
   - 點擊倒數計時器按鈕 (⏰)
   - 在畫布上點擊放置位置
   - 使用 ±1分鐘、±10秒按鈕調整時間
   - 點擊播放按鈕開始倒數
2. **碼錶**:
   - 點擊碼錶按鈕 (⏱)
   - 在畫布上點擊放置位置
   - 點擊播放按鈕開始計時
   - 點擊重置按鈕歸零

### 背景管理
1. 使用背景下拉選單選擇預設背景
2. 選擇「自訂顏色」可設定任意背景顏色
3. 背景變更時會保留所有繪圖內容

## 快速開始

1. **下載專案**:
   ```bash
   git clone [repository-url]
   cd WhiteBoard
   ```

2. **啟動本地伺服器**:
   ```bash
   # 使用 Python
   python -m http.server 5000
   
   # 或使用 Node.js
   npx serve .
   ```

3. **開啟瀏覽器**:
   訪問 `http://localhost:5000`

## 瀏覽器支援

- ✅ Chrome (推薦)
- ✅ Firefox
- ✅ Safari
- ✅ Edge
- ⚠️ IE 11+ (部分功能可能受限)

## 開發架構

### 模組化設計
- **CanvasModule**: 負責畫布初始化、繪圖功能、RWD 調整
- **BackgroundModule**: 管理背景類型和繪製
- **TextToolModule**: 處理文字工具的新增和編輯
- **NotesModule**: 管理便條紙的新增、編輯、移動
- **QRCodeModule**: QR Code 產生和畫布放置
- **YouTubeModule**: YouTube 影片嵌入和管理
- **ImageModule**: 圖片插入和管理
- **CountdownModule**: 倒數計時器功能（DOM 元素）
- **StopwatchModule**: 碼錶功能（DOM 元素）
- **VolumeDetectionModule**: 音量偵測和警告系統
- **app.js**: 協調各模組並處理使用者介面事件

### 專案管理架構 (開發中)
- **ProjectManager**: 專案 CRUD 操作和 localStorage 管理
- **SaveLoadModule**: 各模組資料的收集和還原
- **ProjectUI**: 專案相關使用者介面管理

### 資料流
1. 使用者操作 → app.js 事件處理
2. app.js → 對應模組方法調用
3. 模組處理 → 更新畫布/DOM 或 UI
4. 資料記錄 → 支援內容重繪和專案儲存

## 後續開發計畫

### 🔄 進行中
- 專案管理系統核心功能
- 專案儲存載入機制
- 專案選擇器介面

### 📋 計畫中
- 撤銷/重做功能
- 圖形工具 (直線、矩形、圓形)
- 檔案匯出功能 (PNG, JPG, PDF)
- 快捷鍵支援 (Ctrl+S 儲存、Ctrl+O 開啟)
- 專案範本系統
- 效能優化

## 貢獻指南

歡迎提交 Issue 和 Pull Request！

## 專案里程碑

- ✅ **2024 Q1**: MVP 核心功能完成
- ✅ **2024 Q2**: 進階功能模組完成 (QR Code, YouTube, 圖片, 計時器, 音量偵測)
- 🔄 **2024 Q3**: 專案管理系統開發中
- 📋 **2024 Q4**: 效能優化和使用者體驗改進 